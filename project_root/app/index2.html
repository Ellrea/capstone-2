<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>CodeRadar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./css/style2.css" />
</head>
<body>
  <header>
    <button class="btn">Login</button>
    <button class="btn">Sign up</button>
  </header>

  <main class="container">
    <h1 class="logo">
      <a href="index2.html" class="logo-link">CodeRadar</a>
    </h1>

    <!-- 0) idle -->
    <section id="view-idle" class="panel">
      <h2 class="section-title">Upload</h2>
      <p class="muted center">Upload your file and start identifying</p>

      <div class="search">
        <!-- ✅ fileInput는 한 번만 -->
        <input id="fileInput" type="file" class="file-input" />
        <div class="upload-area" id="dropZone">Drag &amp; Drop here</div>
        <button id="btnAnalyze" class="btn primary">판별 시작</button>
      </div>

      <details class="dev-details" open>
        <summary>결과 시뮬레이션 (개발용)</summary>
        <div class="actions">
          <button class="btn" id="btnSimOk">정상 결과</button>
          <button class="btn" id="btnSimBad">악성 결과</button>
          <button class="btn" id="btnSimFail">판별 실패</button>
        </div>
      </details>

      <hr class="divider">
      <h3 class="sub-title">Published malicious files</h3>
      <div class="list">
        <div class="item">Sample A — Trojan.Win32.Example</div>
        <div class="item">Sample B — Ransom.Example</div>
      </div>
    </section>

    <!-- 1) loading -->
    <section id="view-loading" class="panel hidden">
      <div class="loading">
        <div class="spinner"></div>
        <div>
          <strong>분석 중…</strong>
          <div class="muted">보통 3~10초 정도 소요됩니다.</div>
        </div>
      </div>
    </section>

    <!-- 2) success_benign -->
    <section id="view-ok" class="panel hidden">
      <div class="result">
        <span class="tag ok">정상 코드</span>
        <h2 class="result-title">안전합니다.</h2>
        <div class="box">
          <div><strong>요약</strong> — 의심 패턴이 감지되지 않았습니다.</div>
          <div class="muted">SHA256: <span id="ok-hash">-</span> · 스캔시간: <span id="ok-time">-</span>초</div>
        </div>
        <div class="actions">
          <button class="btn" id="btnAnotherOk">다른 파일 분석</button>
          <button class="btn" id="btnReportOk">리포트 저장</button>
        </div>
      </div>
    </section>

    <!-- 3) success_malicious -->
    <section id="view-bad" class="panel hidden">
      <div class="result">
        <span class="tag bad">악성 코드</span>
        <h2 class="result-title">주의가 필요합니다.</h2>
        <div class="box" id="bad-reasons">
          • 난독화 코드 패턴 감지<br/>
          • 의심 URL 호출 흔적<br/>
          • 위험 API 사용 빈도 높음
        </div>
        <div class="actions">
          <button class="btn" id="btnAnotherBad">다른 파일 분석</button>
          <button class="btn" id="btnReportBad">리포트 저장</button>
        </div>
      </div>
    </section>

    <!-- 4) failure -->
    <section id="view-fail" class="panel hidden">
      <div class="result">
        <span class="tag fail">판별 실패</span>
        <h2 class="result-title">분석에 실패했습니다.</h2>
        <div class="box" id="fail-msg">서버 오류 또는 지원하지 않는 파일 형식일 수 있습니다.</div>
        <div class="actions">
          <button class="btn" id="btnRetry">다시 시도</button>
          <button class="btn" id="btnGoIdle">처음으로</button>
        </div>
      </div>
    </section>

    <!-- ✅ API 테스트: 같은 fileInput 공유, 결과만 predictResult에 출력 -->
    <section class="panel">
      <h2>파일 예측(API 테스트)</h2>
      <div class="actions">
        <button id="btnPredict" class="btn">예측 요청</button>
        <button id="btnHealth" class="btn">헬스 체크</button>
      </div>
      <div id="predictResult" class="box" style="margin-top:12px;"></div>
      <div id="healthResult" class="box" style="margin-top:8px;"></div>
    </section>
  </main>

  <!-- ✅ 모듈 스크립트: 본문 끝에서 한 번만 로드 -->
  <script type="module" src="./js/script2.js"></script>
</body>
</html>
